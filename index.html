<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Công Ty TNHH NHẬT THẮNG - Sắt Thép Vũng Tàu</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* Enable smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        /* Style for the carousel transition */
        .carousel-track {
            transition: transform 0.5s ease-in-out;
        }
        /* Custom color palette */
        .bg-custom-blue { background-color: #1A3D7C; }
        .text-custom-blue { color: #1A3D7C; }
        .hover\:bg-custom-blue-dark:hover { background-color: #132d5b; }
        .bg-custom-red { background-color: #D62828; }
        .hover\:bg-custom-red-dark:hover { background-color: #b02020; }
        .text-custom-yellow { color: #FFD700; }

        /* Styles for the new floating action buttons */
        .fab-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .fab-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            transform: scale(0.95);
        }
        .fab-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        }
        .fab-call { background-color: #25D366; }
        .fab-zalo { background-color: #0068ff; }
        .fab-email { background-color: #c71610; }
        .fab-facebook { background-color: #1877F2; }
        .fab-map { background-color: #34A853; }
        
        /* Styles for AI Estimator results */
        #result-content pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: inherit;
            font-size: 1rem;
            line-height: 1.6;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- HEADER -->
    <header class="bg-custom-blue shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-24">
                <!-- Logo -->
                <div class="flex-shrink-0">
                    <a href="index.html" class="flex items-center space-x-3">
                        <img class="h-20 w-20 rounded-md object-cover" src="images/logo-nhat-thang.webp" alt="Logo Công Ty TNHH Nhật Thắng">
                    </a>
                </div>

                <!-- Desktop Navigation -->
                <nav class="hidden md:flex items-center h-full space-x-10">
                    <a href="#home" class="text-white hover:text-custom-yellow transition duration-300">Trang chủ</a>
                    <a href="#gioithieu" class="text-white hover:text-custom-yellow transition duration-300">Giới thiệu</a>
                    <!-- Dropdown Menu on Hover -->
                    <div class="relative group h-full flex items-center">
                        <a href="#sanpham" class="text-white hover:text-custom-yellow transition duration-300 flex items-center cursor-pointer h-full">
                            Sản phẩm <i class="fas fa-chevron-down ml-2 text-xs"></i>
                        </a>
                        <div class="absolute top-full left-1/2 -translate-x-1/2 w-48 bg-white rounded-md shadow-lg py-1 z-20 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300">
                            <a href="#sanpham" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Tất Cả Sản Phẩm</a>
                            <a href="#theptam" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Thép Tấm</a>
                            <a href="#thephinh" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Thép Hình</a>
                            <a href="#thepong" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Thép Ống</a>
                            <a href="#thephop" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Thép Hộp</a>
                            <a href="#theplap" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Thép Láp</a>
                            <a href="#inox" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Inox</a>
                            <a href="#luoi" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Lưới</a>
                            <a href="#phukien" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Phụ Kiện</a>
                        </div>
                    </div>
                    <a href="#dichvu" class="text-white hover:text-custom-yellow transition duration-300">Dịch vụ</a>
                </nav>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-white hover:text-custom-yellow focus:outline-none">
                        <i class="fas fa-bars fa-lg"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation -->
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#home" class="block text-white hover:bg-custom-blue-dark px-3 py-2 rounded-md">Trang chủ</a>
                <a href="#gioithieu" class="block text-white hover:bg-custom-blue-dark px-3 py-2 rounded-md">Giới thiệu</a>
                <a href="#sanpham" class="block text-white hover:bg-custom-blue-dark px-3 py-2 rounded-md">Sản phẩm</a>
                <a href="#dichvu" class="block text-white hover:bg-custom-blue-dark px-3 py-2 rounded-md">Dịch vụ</a>
                <a href="#lienhe" class="block text-white hover:bg-custom-blue-dark px-3 py-2 rounded-md">Liên Hệ</a>
            </div>
        </div>
    </header>

    <main>
        <!-- BANNER / HERO SECTION -->
        <section id="home" class="relative bg-custom-blue text-white py-24 md:py-32">
            <div class="absolute inset-0 bg-cover bg-center opacity-20" style="background-image: url('https://images.unsplash.com/photo-1599691880946-f0f823a07125?q=80&w=2070&auto=format&fit=crop');"></div>
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center relative">
                <h1 class="text-4xl md:text-6xl font-extrabold tracking-wider leading-tight mb-4">NHẬT THẮNG</h1>
                <p class="text-lg md:text-xl max-w-3xl mx-auto">Uy tín trong ngành sắt thép từ năm 2000</p>
            </div>
        </section>

        <!-- CAROUSEL SECTION - FULL WIDTH -->
        <div id="image-carousel" class="relative w-full overflow-hidden" style="height: 50vh;">
            <!-- Track for slides -->
            <div class="carousel-track flex h-full">
                <!-- Slide 1 -->
                <div class="w-full flex-shrink-0 h-full bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1542838097-b89415474447?q=80&w=1974&auto=format&fit=crop');"></div>
                <!-- Slide 2 -->
                <div class="w-full flex-shrink-0 h-full bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1516146555284-85265419b46e?q=80&w=2070&auto=format&fit=crop');"></div>
                <!-- Slide 3 -->
                <div class="w-full flex-shrink-0 h-full bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1622434641406-a15993414892?q=80&w=2070&auto=format&fit=crop');"></div>
                <!-- Slide 4 -->
                <div class="w-full flex-shrink-0 h-full bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1599249213199-52d334685a73?q=80&w=2070&auto=format&fit=crop');"></div>
            </div>
            <!-- Prev/Next Buttons -->
            <button id="carousel-prev" class="absolute top-1/2 left-4 transform -translate-y-1/2 bg-white/70 hover:bg-white text-gray-800 rounded-full p-3 transition z-10">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button id="carousel-next" class="absolute top-1/2 right-4 transform -translate-y-1/2 bg-white/70 hover:bg-white text-gray-800 rounded-full p-3 transition z-10">
                <i class="fas fa-chevron-right"></i>
            </button>
            <!-- Dots Navigation -->
            <div id="carousel-dots" class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2"></div>
        </div>
        
        <!-- INTRODUCTION SECTION -->
        <section id="gioithieu" class="py-16">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-3xl font-bold text-custom-blue mb-4">Về Nhật Thắng</h2>
                <p class="max-w-3xl mx-auto text-lg text-gray-600 mb-8">
                    Với hơn 20 năm kinh nghiệm, Nhật Thắng là đơn vị phân phối sắt thép hàng đầu. Chúng tôi cam kết mang đến giải pháp vật tư hiệu quả, đáp ứng mọi nhu cầu từ dân dụng đến công nghiệp, luôn lấy chữ tín và sự tận tâm làm kim chỉ nam.
                </p>
            </div>
        </section>

        <!-- PRODUCTS SECTION -->
        <section id="sanpham" class="py-16 bg-gray-50">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center text-custom-blue mb-12">Sản Phẩm Của Chúng Tôi</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                    <!-- Cards -->
                    <div id="theptam" class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300"><img src="https://placehold.co/600x400/eeeeee/cccccc?text=Thép+Tấm" class="w-full h-56 object-cover" alt="Thép Tấm"><div class="p-6"><h3 class="text-xl font-bold text-custom-blue mb-2">Thép Tấm</h3><p class="text-gray-600">Thép tấm cán nóng, cán nguội, chống trượt với đa dạng độ dày và kích thước.</p></div></div>
                    <div id="thephinh" class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300"><img src="https://placehold.co/600x400/eeeeee/cccccc?text=Thép+Hình" class="w-full h-56 object-cover" alt="Thép Hình"><div class="p-6"><h3 class="text-xl font-bold text-custom-blue mb-2">Thép Hình</h3><p class="text-gray-600">Thép hình I, U, V, H cho các kết cấu xây dựng và công nghiệp.</p></div></div>
                    <div id="thepong" class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300"><img src="https://placehold.co/600x400/eeeeee/cccccc?text=Thép+Ống" class="w-full h-56 object-cover" alt="Thép Ống"><div class="p-6"><h3 class="text-xl font-bold text-custom-blue mb-2">Thép Ống</h3><p class="text-gray-600">Thép ống đen, mạ kẽm, ống đúc cho các ứng dụng dân dụng và công nghiệp.</p></div></div>
                    <div id="thephop" class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300"><img src="https://placehold.co/600x400/eeeeee/cccccc?text=Thép+Hộp" class="w-full h-56 object-cover" alt="Thép Hộp"><div class="p-6"><h3 class="text-xl font-bold text-custom-blue mb-2">Thép Hộp</h3><p class="text-gray-600">Thép hộp vuông, chữ nhật, đen và mạ kẽm, độ bền cao.</p></div></div>
                    <div id="theplap" class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300"><img src="https://placehold.co/600x400/eeeeee/cccccc?text=Thép+Láp" class="w-full h-56 object-cover" alt="Thép Láp"><div class="p-6"><h3 class="text-xl font-bold text-custom-blue mb-2">Thép Láp</h3><p class="text-gray-600">Thép láp tròn trơn, đặc, sử dụng trong gia công cơ khí chính xác.</p></div></div>
                    <div id="inox" class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300"><img src="https://placehold.co/600x400/eeeeee/cccccc?text=Inox" class="w-full h-56 object-cover" alt="Inox"><div class="p-6"><h3 class="text-xl font-bold text-custom-blue mb-2">Inox</h3><p class="text-gray-600">Các loại inox tấm, ống, hộp, V với chất lượng cao, chống gỉ sét.</p></div></div>
                    <div id="luoi" class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300"><img src="https://placehold.co/600x400/eeeeee/cccccc?text=Lưới" class="w-full h-56 object-cover" alt="Lưới"><div class="p-6"><h3 class="text-xl font-bold text-custom-blue mb-2">Lưới</h3><p class="text-gray-600">Lưới thép B40, lưới hàn, lưới mắt cáo cho hàng rào và xây dựng.</p></div></div>
                    <div id="phukien" class="bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition duration-300"><img src="https://placehold.co/600x400/eeeeee/cccccc?text=Phụ+Kiện" class="w-full h-56 object-cover" alt="Phụ Kiện"><div class="p-6"><h3 class="text-xl font-bold text-custom-blue mb-2">Phụ Kiện</h3><p class="text-gray-600">Cung cấp đầy đủ phụ kiện ngành sắt thép: bản mã, mặt bích, bu lông...</p></div></div>
                </div>
            </div>
        </section>

        <!-- SERVICES SECTION -->
        <section id="dichvu" class="py-16">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center text-custom-blue mb-12">Dịch Vụ Của Chúng Tôi</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="bg-white p-8 rounded-lg shadow-md"><i class="fas fa-cut fa-3x text-custom-red mb-4"></i><h3 class="text-xl font-bold text-custom-blue mb-2">Gia Công Cắt</h3><p class="text-gray-600">Cắt sắt thép theo mọi kích thước yêu cầu của khách hàng với độ chính xác cao.</p></div>
                    <div class="bg-white p-8 rounded-lg shadow-md"><i class="fas fa-ruler-combined fa-3x text-custom-red mb-4"></i><h3 class="text-xl font-bold text-custom-blue mb-2">Đục Lỗ Theo Yêu Cầu</h3><p class="text-gray-600">Nhận đục lỗ, khoan lỗ trên các sản phẩm thép theo bản vẽ kỹ thuật.</p></div>
                    <div class="bg-white p-8 rounded-lg shadow-md"><i class="fas fa-truck fa-3x text-custom-red mb-4"></i><h3 class="text-xl font-bold text-custom-blue mb-2">Vận Chuyển Toàn Quốc</h3><p class="text-gray-600">Hỗ trợ giao hàng tận nơi nhanh chóng, đảm bảo an toàn trên toàn quốc.</p></div>
                </div>
            </div>
        </section>
        
        <!-- GEMINI AI ESTIMATOR SECTION -->
        <section id="estimator" class="py-16 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-custom-blue">✨ Công Cụ Ước Tính Vật Tư AI</h2>
                    <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Mô tả dự án của bạn (ví dụ: "làm hàng rào dài 10m, cao 1.5m"), và trợ lý AI của chúng tôi sẽ gợi ý vật tư cần thiết!</p>
                </div>
                <div class="max-w-4xl mx-auto">
                    <div class="bg-gray-50 p-6 rounded-lg shadow-inner">
                        <textarea id="project-description" class="w-full h-28 p-4 border border-gray-300 rounded-md focus:ring-2 focus:ring-custom-blue focus:outline-none" placeholder="Nhập mô tả dự án của bạn ở đây..."></textarea>
                        <button id="estimate-button" class="mt-4 w-full bg-custom-red text-white font-bold py-3 px-8 rounded-lg hover:bg-custom-red-dark transition duration-300 flex items-center justify-center">
                            <i class="fas fa-magic mr-2"></i>
                            Ước Tính Ngay
                        </button>
                    </div>
                    <div id="estimator-result" class="mt-6 bg-white p-6 rounded-lg shadow-md min-h-[100px] border border-gray-200" style="display: none;">
                        <div id="loading-indicator" class="text-center" style="display: none;">
                            <i class="fas fa-spinner fa-spin fa-2x text-custom-blue"></i>
                            <p class="mt-2 text-gray-600">Trợ lý AI đang tính toán, vui lòng chờ trong giây lát...</p>
                        </div>
                        <div id="result-content"></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer id="lienhe" class="bg-custom-blue text-white">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <!-- Branding -->
                <div class="md:col-span-1">
                    <a href="#" class="flex items-center space-x-4 mb-4">
                        <img class="h-24 w-24 rounded-md object-cover" src="images/logo-nhat-thang.webp" alt="Logo Công Ty TNHH Nhật Thắng">
                        <h3 class="text-3xl font-bold tracking-wider">CÔNG TY TNHH <span class="whitespace-nowrap">NHẬT THẮNG</span></h3>
                    </a>
                </div>
                <!-- Contact Info -->
                <div class="md:col-span-1">
                    <h4 class="font-semibold text-lg mb-4">Thông Tin Liên Hệ</h4>
                    <p class="text-gray-300 flex items-start mb-2"><i class="fas fa-map-marker-alt w-5 mr-3 mt-1"></i><span>665 Đường 30 tháng 4, Phường Rạch Dừa, Thành Phố Vũng Tàu</span></p>
                    <p class="text-gray-300 flex items-center mb-2"><i class="fas fa-envelope w-5 mr-3"></i><a href="mailto:nhatthangvt@gmail.com" class="hover:text-custom-yellow">nhatthangvt@gmail.com</a></p>
                    <p class="text-gray-300 flex items-center mb-2"><i class="fas fa-phone w-5 mr-3"></i><span>Hotline: <a href="tel:0903842182" class="hover:text-custom-yellow">0903842182</a></span></p>
                    <p class="text-gray-300 flex items-center mb-2"><i class="fas fa-headset w-5 mr-3"></i><span>Phòng kinh doanh: <a href="tel:0812738838" class="hover:text-custom-yellow">0812738838</a></span></p>
                </div>
            </div>
            <!-- Copyright Bar -->
            <div class="mt-8 pt-8 border-t border-gray-700 text-center">
                <p class="text-gray-400 text-sm">© 2000 - <span id="copyright-year"></span> CÔNG TY TNHH NHẬT THẮNG. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Floating Action Buttons -->
    <div class="fab-container">
        <!-- Phone Call -->
        <a href="tel:0903842182" class="fab-icon fab-call" aria-label="Gọi điện thoại" target="_blank">
            <i class="fas fa-phone fa-lg"></i>
        </a>
        <!-- Zalo -->
        <a href="https://zalo.me/0812738838" class="fab-icon fab-zalo" aria-label="Chat Zalo" target="_blank">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Icon_of_Zalo.svg/2048px-Icon_of_Zalo.svg.png" alt="Zalo Logo" class="w-8 h-8 object-contain">
        </a>
        <!-- Email -->
        <a href="mailto:nhatthangvt@gmail.com" class="fab-icon fab-email" aria-label="Gửi Email" target="_blank">
            <i class="fas fa-envelope fa-lg"></i>
        </a>
        <!-- Facebook -->
        <a href="https://www.facebook.com/share/12KqXiZTsYd/" class="fab-icon fab-facebook" aria-label="Facebook" target="_blank">
            <i class="fab fa-facebook-f fa-lg"></i>
        </a>
        <!-- Google Maps -->
        <a href="https://maps.app.goo.gl/TDavrGWDazShqv9b8?g_st=afm" class="fab-icon fab-map" aria-label="Xem bản đồ" target="_blank">
            <i class="fas fa-map-marker-alt fa-lg"></i>
        </a>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    
    // --- RESPONSIVE NAVIGATION ---
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
        const icon = mobileMenuButton.querySelector('i');
        icon.classList.toggle('fa-bars');
        icon.classList.toggle('fa-times');
    });

    // --- IMAGE CAROUSEL ---
    const carousel = document.getElementById('image-carousel');
    if (carousel) {
        const track = carousel.querySelector('.carousel-track');
        const slides = Array.from(track.children);
        const nextButton = document.getElementById('carousel-next');
        const prevButton = document.getElementById('carousel-prev');
        const dotsNav = document.getElementById('carousel-dots');
        let slideWidth = slides.length > 0 ? carousel.getBoundingClientRect().width : 0;
        let currentIndex = 0;
        let autoPlayInterval;

        const moveToSlide = (targetIndex) => {
            if (slides.length === 0) return;
            track.style.transform = 'translateX(-' + slideWidth * targetIndex + 'px)';
            currentIndex = targetIndex;
            updateDots();
        };
        
        const updateDots = () => {
            if (dots.length === 0) return;
            dots.forEach((dot, index) => {
                dot.classList.toggle('bg-white', index === currentIndex);
            });
        };
        
        const setSlidePositions = () => {
            if (slides.length === 0) return;
            slideWidth = carousel.getBoundingClientRect().width;
            slides.forEach((slide, index) => {
                slide.style.width = slideWidth + 'px';
            });
            moveToSlide(currentIndex);
        };

        slides.forEach((slide, index) => {
            const dot = document.createElement('button');
            dot.classList.add('w-3', 'h-3', 'rounded-full', 'bg-white/50', 'hover:bg-white', 'transition');
            dot.addEventListener('click', () => {
                moveToSlide(index);
                resetAutoPlay();
            });
            dotsNav.appendChild(dot);
        });
        const dots = Array.from(dotsNav.children);

        nextButton.addEventListener('click', () => {
            if (slides.length === 0) return;
            const nextIndex = (currentIndex + 1) % slides.length;
            moveToSlide(nextIndex);
            resetAutoPlay();
        });

        prevButton.addEventListener('click', () => {
            if (slides.length === 0) return;
            const prevIndex = (currentIndex - 1 + slides.length) % slides.length;
            moveToSlide(prevIndex);
            resetAutoPlay();
        });
        
        const startAutoPlay = () => {
            autoPlayInterval = setInterval(() => {
                if (slides.length === 0) return;
                const nextIndex = (currentIndex + 1) % slides.length;
                moveToSlide(nextIndex);
            }, 5000); // Change slide every 5 seconds
        };
        
        const resetAutoPlay = () => {
            clearInterval(autoPlayInterval);
            startAutoPlay();
        };

        window.addEventListener('resize', setSlidePositions);
        
        // Initial setup
        setSlidePositions();
        updateDots();
        startAutoPlay();
    }

    // --- DYNAMIC COPYRIGHT YEAR ---
    const copyrightYearEl = document.getElementById('copyright-year');
    if (copyrightYearEl) {
        copyrightYearEl.textContent = new Date().getFullYear();
    }

    // --- GEMINI AI ESTIMATOR ---
    const estimateButton = document.getElementById('estimate-button');
    const projectDescription = document.getElementById('project-description');
    const estimatorResult = document.getElementById('estimator-result');
    const loadingIndicator = document.getElementById('loading-indicator');
    const resultContent = document.getElementById('result-content');

    estimateButton.addEventListener('click', async () => {
        const description = projectDescription.value.trim();
        if (!description) {
            alert('Vui lòng nhập mô tả dự án của bạn.');
            return;
        }

        // Show loading state
        estimatorResult.style.display = 'block';
        loadingIndicator.style.display = 'flex';
        resultContent.innerHTML = '';
        estimateButton.disabled = true;
        estimateButton.classList.add('opacity-50', 'cursor-not-allowed');

        const prompt = `Bạn là một chuyên gia tư vấn vật liệu xây dựng cho công ty sắt thép Nhật Thắng tại Vũng Tàu, Việt Nam. Nhiệm vụ của bạn là giúp khách hàng ước tính vật tư cần thiết cho dự án của họ dựa trên mô tả.

    Danh mục sản phẩm của chúng tôi bao gồm: Thép Tấm, Thép Hình (I, U, V, H), Thép Ống, Thép Hộp, Thép Láp, Inox, Lưới, và các loại Phụ Kiện.

    Dựa trên mô tả dự án sau đây từ khách hàng, hãy phân tích và đưa ra danh sách các vật liệu gợi ý.
    Mô tả dự án: "${description}"

    Vui lòng trả lời bằng tiếng Việt. Trình bày kết quả dưới dạng danh sách rõ ràng, có gạch đầu dòng hoặc đánh số. Với mỗi mục, hãy nêu rõ sản phẩm gợi ý, lý do ngắn gọn và số lượng ước tính. Nếu yêu cầu không rõ ràng, hãy hỏi thêm chi tiết để có thể tư vấn chính xác hơn. Luôn giữ thái độ thân thiện, hữu ích và chuyên nghiệp. Kết thúc câu trả lời bằng một lưu ý rằng đây chỉ là ước tính sơ bộ và khách hàng nên liên hệ trực tiếp để có báo giá chính xác.`;
        
        try {
            const chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
            const payload = { contents: chatHistory };
            const apiKey = ""; // API key is not needed for gemini-2.0-flash
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                const errorData = await response.text();
                console.error("API Error:", response.status, errorData);
                throw new Error(`API error! status: ${response.status}`);
            }

            const result = await response.json();
            
            let text = 'Đã có lỗi xảy ra, vui lòng thử lại.';
            if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                text = result.candidates[0].content.parts[0].text;
            }
            
            // Display result in a <pre> tag to preserve formatting safely
            const pre = document.createElement('pre');
            pre.textContent = text;
            resultContent.appendChild(pre);

        } catch (error) {
            console.error('Error calling Gemini API:', error);
            resultContent.innerHTML = '<p class="text-red-500">Đã có lỗi xảy ra khi kết nối với trợ lý AI. Vui lòng thử lại sau.</p>';
        } finally {
            // Hide loading state
            loadingIndicator.style.display = 'none';
            estimateButton.disabled = false;
            estimateButton.classList.remove('opacity-50', 'cursor-not-allowed');
        }
    });
});
</script>

</body>
</html>
